{% extends "dash/base.html" %}

{% import 'execute/stats_row.html' as stats_row %}

{% block page_title %}
Stage {{ stage.id }}: {{ stage.name }}
{% endblock %}


{% block page_body %}
<div class="container">
	<h2>Tasks:</h2>
	<table class="table table-hover ">
		<thead>
			<tr>
				<th width="10%">Task</th>
				<th width="10%">Duration</th>
				<th width="20%">Started</th>
				<th width="20%">Finished</th>
				<th width="30%">Worker</th>
			</tr>
		</thead>
		<tbody>
			{% for task in stage.tasks|reverse %}
			<tr>
				<td>{{ task.id }} {{ task.name or '' }}</td>
				<td>{{ (task.stopped_on - task.started_on)|fmt_timedelta if task.stopped_on and task.started_on else '' }}</td>
				<td>{{ task.started_on.strftime('%Y-%m-%d %H:%M:%S') if task.started_on else '' }}</td>
				<td>{{ task.stopped_on.strftime('%Y-%m-%d %H:%M:%S') if task.stopped_on else '' }}</td>
				<td>{{ task.executed_on[-1] }}</td>
				
			</tr>
			{% endfor %}
		</tbody>
	</table>
	<hr />
</div>
{% endblock %}
